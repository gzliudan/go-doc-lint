# 性能基准测试

[English](BENCHMARKS.md) | 中文版

## 概述

这些基准测试提供 go-doc-lint 性能的**参考值**。结果会受到硬件、系统、Shell 版本和文件结构的影响。

---

## 测试环境

- **CPU**：现代 8 核 x86
- **内存**：16 GB
- **磁盘**：SSD
- **OS**：Windows 11 / Ubuntu 22.04
- **Bash**：5.x
- **PowerShell**：5.1 / 7.x

---

## 方法

1. 预热文件系统缓存
2. 每条命令运行 3 次
3. 取中位数
4. 使用本地文件系统（非网络挂载）

示例命令：

```bash
/usr/bin/time -p ./go-doc-lint.sh ./sample-project
```

---

## 结果（典型项目）

项目特征：

- ~1,000 个 Go 文件
- ~15,000 行代码
- 标准模块布局（`cmd/`、`pkg/`、`internal/`）

| 操作              | Bash (秒) | PowerShell (秒) | 说明          |
| ----------------- | --------- | --------------- | ------------- |
| 扫描全部 .go 文件 | 1.8       | 2.1             | 全量扫描      |
| 仅扫描测试文件    | 0.9       | 1.2             | `--test`      |
| 扫描单个目录      | 0.6       | 0.8             | `./pkg`       |
| 输出到文件        | +0.1      | +0.1            | 轻微 I/O 开销 |

---

## 扩展性说明

- 运行时间与文件数量**近似线性**增长。
- 含大注释块的文件可能增加额外开销。
- 性能通常受 I/O 限制，而非 CPU。

---

## 加速建议

- 尽量扫描具体目录，而不是仓库根目录。
- 避免扫描生成代码目录。
- 仅在需要时使用 `--test` 或 `--all`。
- 对大量结果，建议输出到文件。

---

**最后更新**：2026-02-01
